% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plot_statis_phase2.R
\name{plot_statis_phase2_chart}
\alias{plot_statis_phase2_chart}
\title{Plot STATIS Dual Robust Control Chart - Phase 2 (All Batches)}
\usage{
plot_statis_phase2_chart(
  phase1_result,
  phase2_result,
  title = "Robust STATIS Dual Control Chart - All Batches"
)
}
\arguments{
\item{phase1_result}{A list returned by \code{robust_statis_phase1()}, which includes
\code{batch_statistics} with Chi-squared values for Phase 1 batches.}

\item{phase2_result}{A list returned by \code{robust_statis_phase2()}, including
\code{chi_stats_by_batch} with Hotelling T² values and a control \code{threshold}.}

\item{title}{Optional string. Plot title.}
}
\value{
A ggplot2 object representing the control chart with all batches (Fase 1 y Fase 2).
}
\description{
Plots the Chi-squared statistics for both Phase 1 and Phase 2 batches,
using the robust Hotelling T² statistic per batch. Batches from Phase 1 are assumed
to be under control and those from Phase 2 are evaluated against the control threshold
obtained from a chi-squared distribution with df equal to the number of variables.
}
\examples{
# Simulate pharmaceutical manufacturing batches
datos <- simulate_pharma_batches()

# Phase 1 analysis: select under control batches
phase1 <- robust_statis_phase1(
  data = subset(datos, Fase == "Fase 1" & Status == "Under Control"),
  variables = c("Concentration", "Humidity", "Dissolution", "Density")
)

# Phase 2 evaluation: new batches
phase2 <- robust_statis_phase2(
  new_data = subset(datos, Fase == "Fase 2"),
  variables = c("Concentration", "Humidity", "Dissolution", "Density"),
  medians = phase1$global_medians,
  mads = phase1$global_mads,
  compromise_matrix = phase1$compromise_matrix,
  global_center = phase1$global_center
)

# Plot Phase 1 + Phase 2 control chart
plot_statis_phase2_chart(phase1, phase2)
}
